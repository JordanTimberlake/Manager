import{aA as g,u as k,r as u,o as C,x as c,A as d,aB as p,y as e,R as T,J as r,aM as i,B as j,C as _,v as m}from"./BU_kieAO.js";import{u as S}from"./CT958AG4.js";import{u as f,c as V}from"./CMekXM97.js";import{c as A}from"./BZiReKcL.js";import{S as M}from"./X0EqqnIZ.js";import"./DlAUqK2U.js";const N={class:"userAuth p-10"},B={class:"w-3/5 mx-auto border border-slate-600 rounded-md p-10"},F=e("div",{class:"pb-6"},[e("h1",{class:"text-3xl font-semibold text-left"}," Create an account "),e("p",{class:"text-sm"},[_("Already have an account? "),e("a",{class:"underline",href:"/login"},"Log in")])],-1),q={class:"w-full flex lg:flex-row-reverse flex-col justify-between gap-4"},E={class:"lg:w-1/2 flex flex-col justify-center items-center gap-10"},P=e("h1",{class:"lg:text-3xl font-semibold text-center"}," Welcome to ManagerOrg ",-1),R={key:0,class:"w-full flex justify-center items-center"},U={class:"lg:w-1/2"},O={class:"flex flex-row justify-between gap-4"},$={class:"mb-4"},D=e("label",{for:"name",class:"block text-sm font-bold mb-2"},"Name",-1),J={class:"mb-4"},L=e("label",{for:"surname",class:"block text-sm font-bold mb-2"},"Surname",-1),G={class:"mb-4"},W=e("label",{for:"email",class:"block text-sm font-bold mb-2"},"Email",-1),X={class:"mb-4"},z=e("label",{for:"password",class:"block text-sm font-bold mb-2"},"Password",-1),H={class:"flex items-center justify-between"},I=e("a",{href:"/login",class:"underline"},"Log in instead",-1),ae={__name:"signup",setup(K){const h=g(),v=k();S({title:"Create account",description:"Manager account creation page"});const l=f("token"),b=f("user_id"),n=u(!1),t=u({first_name:"",last_name:"",email:"",password:""}),w=async()=>{if(n.value=!0,t.value.email===""||t.value.password===""||t.value.first_name===""||t.value.last_name===""){alert("Please fill in all fields");return}try{const s=await $fetch("https://vitreous-bert-jordantimberlake-dd542edd.koyeb.app/api/auth/signup/",{method:"POST",body:JSON.stringify({first_name:t.value.first_name,last_name:t.value.last_name,email:t.value.email,password:t.value.password}),headers:{"Content-Type":"application/json","X-CSRFToken":l.value||""},withCredentials:!0});b.value=s.user_id,n.value=!1,v.push("/home")}catch(s){console.error("Failed to login",s),s.value="Failed - Please make sure you have filled in all the input boxes",y(s.value)}n.value=!1},x=async()=>{try{const s=await $fetch("https://vitreous-bert-jordantimberlake-dd542edd.koyeb.app/api/token/",{method:"GET",headers:{"Content-Type":"application/json"},withCredentials:!0});l.value=s.csrfToken}catch(s){console.error("Failed to fetch CSRF token",s)}},y=s=>{s=s||"An error occurred",h.add({severity:"warn",summary:"Error",detail:s,life:5e3})};return C(()=>{l.value===""&&x(),console.log("token ",l.value)}),(s,a)=>(m(),c("div",N,[d(p(A)),e("div",B,[F,e("div",q,[e("div",E,[P,n.value?(m(),c("div",R,[d(M)])):T("",!0)]),e("form",U,[e("div",O,[e("div",$,[D,r(e("input",{type:"name",id:"name","onUpdate:modelValue":a[0]||(a[0]=o=>t.value.first_name=o),required:"",class:"shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none focus:shadow-outline"},null,512),[[i,t.value.first_name]])]),e("div",J,[L,r(e("input",{type:"surname",id:"surname","onUpdate:modelValue":a[1]||(a[1]=o=>t.value.last_name=o),required:"",class:"shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none focus:shadow-outline"},null,512),[[i,t.value.last_name]])])]),e("div",G,[W,r(e("input",{type:"email",id:"email","onUpdate:modelValue":a[2]||(a[2]=o=>t.value.email=o),required:"",class:"shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none focus:shadow-outline"},null,512),[[i,t.value.email]])]),e("div",X,[z,r(e("input",{type:"password",id:"password","onUpdate:modelValue":a[3]||(a[3]=o=>t.value.password=o),required:"",class:"shadow appearance-none border border-red rounded w-full py-2 px-3 mb-3 leading-tight focus:outline-none focus:shadow-outline"},null,512),[[i,t.value.password]])]),e("div",H,[I,d(p(V),{rounded:"",class:"font-bold py-2 px-4 w-1/2",type:"button",onClick:w},{default:j(()=>[_(" Create account ")]),_:1})])])])])]))}};export{ae as default};
