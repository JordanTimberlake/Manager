import{aw as g,u as k,r as c,o as C,x as p,A as i,ay as m,y as e,R as T,J as l,aM as r,B as j,C as h,v as f}from"./BaPgrU-z.js";import{u as S}from"./DFqJgj2c.js";import{u as _,c as V}from"./CQ-QpSxo.js";import{b as M,S as N}from"./COsbiUZU.js";import"./DlAUqK2U.js";const A={class:"userAuth p-10"},F={class:"w-3/5 mx-auto border border-slate-600 rounded-md p-10"},q=e("div",{class:"pb-6"},[e("h1",{class:"text-3xl font-semibold text-left"}," Create an account "),e("p",{class:"text-sm"},[h("Already have an account? "),e("a",{class:"underline",href:"/login"},"Log in")])],-1),B={class:"w-full flex lg:flex-row-reverse flex-col justify-between gap-4"},E={class:"lg:w-1/2 flex flex-col justify-center items-center gap-10"},R=e("h1",{class:"lg:text-3xl font-semibold text-center"}," Welcome to ManagerOrg ",-1),U={key:0,class:"w-full flex justify-center items-center"},O={class:"lg:w-1/2"},P={class:"flex flex-row justify-between gap-4"},$={class:"mb-4"},D=e("label",{for:"name",class:"block text-sm font-bold mb-2"},"Name",-1),J={class:"mb-4"},L=e("label",{for:"surname",class:"block text-sm font-bold mb-2"},"Surname",-1),G={class:"mb-4"},I=e("label",{for:"email",class:"block text-sm font-bold mb-2"},"Email",-1),W={class:"mb-4"},X=e("label",{for:"password",class:"block text-sm font-bold mb-2"},"Password",-1),z={class:"flex items-center justify-between"},H=e("a",{href:"/login",class:"underline"},"Log in instead",-1),ae={__name:"signup",setup(K){const v=g(),b=k();S({title:"Create account",description:"Manager account creation page"});const d=_("token"),w=_("user_id"),n=c(!1),t=c({first_name:"",last_name:"",email:"",password:""}),x=async()=>{if(n.value=!0,t.value.email===""||t.value.password===""||t.value.first_name===""||t.value.last_name===""){u("Failed - Please make sure you have filled in all the input boxes");return}try{const a=await $fetch("https://vitreous-bert-jordantimberlake-dd542edd.koyeb.app/api/auth/signup/",{method:"POST",body:JSON.stringify({first_name:t.value.first_name,last_name:t.value.last_name,email:t.value.email,password:t.value.password}),headers:{"Content-Type":"application/json","X-CSRFToken":d.value||""},withCredentials:!0});w.value=a.user_id,n.value=!1,b.push("/home")}catch(a){console.error("Failed to login",a),a.value="Invalid Credentials",u(a.value)}n.value=!1},y=async()=>{try{const a=await $fetch("https://vitreous-bert-jordantimberlake-dd542edd.koyeb.app/api/token/",{method:"GET",headers:{"Content-Type":"application/json"},withCredentials:!0});d.value=a.csrfToken}catch(a){console.error("Failed to fetch CSRF token",a)}},u=a=>{a=a||"An error occurred",v.add({severity:"warn",summary:"Error",detail:a,life:5e3})};return C(async()=>{await y()}),(a,s)=>(f(),p("div",A,[i(m(M)),e("div",F,[q,e("div",B,[e("div",E,[R,n.value?(f(),p("div",U,[i(N)])):T("",!0)]),e("form",O,[e("div",P,[e("div",$,[D,l(e("input",{type:"name",id:"name","onUpdate:modelValue":s[0]||(s[0]=o=>t.value.first_name=o),required:"",class:"shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none focus:shadow-outline"},null,512),[[r,t.value.first_name]])]),e("div",J,[L,l(e("input",{type:"surname",id:"surname","onUpdate:modelValue":s[1]||(s[1]=o=>t.value.last_name=o),required:"",class:"shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none focus:shadow-outline"},null,512),[[r,t.value.last_name]])])]),e("div",G,[I,l(e("input",{type:"email",id:"email","onUpdate:modelValue":s[2]||(s[2]=o=>t.value.email=o),required:"",class:"shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none focus:shadow-outline"},null,512),[[r,t.value.email]])]),e("div",W,[X,l(e("input",{type:"password",id:"password","onUpdate:modelValue":s[3]||(s[3]=o=>t.value.password=o),required:"",class:"shadow appearance-none border border-red rounded w-full py-2 px-3 mb-3 leading-tight focus:outline-none focus:shadow-outline"},null,512),[[r,t.value.password]])]),e("div",z,[H,i(m(V),{rounded:"",class:"font-bold py-2 px-4 w-1/2",type:"button",onClick:x},{default:j(()=>[h(" Create account ")]),_:1})])])])])]))}};export{ae as default};
